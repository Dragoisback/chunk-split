<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
    <title>Zenith Term Processor Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <meta name="theme-color" content="#3b82f6">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiWmVuaXRoIFRlcm0gUHJvY2Vzc29yIiwic2hvcnRfbmFtZSI6Ilplbml0aCIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsInRoZW1lX2NvbG9yIjoiIzNiODJmNiIsImJhY2tncm91bmRfY29sb3IiOiIjZjBmNGY4IiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UazVJaUJvWldsbmFIUTlJakU1T1NJZ1ptbHNiRDBpSTJGaVltTmpJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lQanh5WldOMElIZHBaSFJvUFNJeE9UbGRiSEI0SWlCb1pXbG5hSFE5SWpFNU9TSWdabWxzYkQwaUkzVm1abVptSWk4K1BDOXpkbWMrIiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwifV19">
    <style>
        /* Enhanced CSS Variables with better mobile support */
        :root {
            /* Colors */
            --bg-main: #f8fafc;
            --bg-panel: #ffffff;
            --bg-panel-hover: #f1f5f9;
            --bg-input: #ffffff;
            --bg-input-focus: #f8fafc;
            --bg-sidebar: #fefefe;
            --primary-50: #eff6ff; --primary-100: #dbeafe; --primary-500: #3b82f6; 
            --primary-600: #2563eb; --primary-700: #1d4ed8; --primary-900: #1e3a8a;
            --secondary-500: #8b5cf6; --secondary-600: #7c3aed;
            --success-500: #10b981; --success-600: #059669;
            --danger-500: #ef4444; --danger-600: #dc2626;
            --warning-500: #f59e0b; --warning-600: #d97706;
            --text-main: #334155; --text-heading: #0f172a; --text-muted: #64748b;
            --border-color: #e2e8f0; --border-light: #f1f5f9;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --ring-primary: 0 0 0 3px rgb(59 130 246 / 0.3);
            --gradient-primary: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            
            /* Typography */
            --font-family: 'Inter', system-ui, -apple-system, sans-serif;
            --font-size-xs: 0.7rem; --font-size-sm: 0.875rem; --font-size-base: 1rem;
            --font-size-lg: 1.125rem; --font-size-xl: 1.25rem;
            
            /* Spacing */
            --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem; --space-4: 1rem;
            --space-5: 1.25rem; --space-6: 1.5rem; --space-8: 2rem;
            
            /* Mobile-first dimensions */
            --touch-target: 44px;
            --sidebar-width: 320px;
            --header-height: 60px;
            --fab-size: 56px;
            
            /* Animations */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-main: #0f172a; --bg-panel: #1e293b; --bg-panel-hover: #334155;
            --bg-input: #334155; --bg-input-focus: #475569; --bg-sidebar: #1e293b;
            --text-main: #cbd5e1; --text-heading: #f1f5f9; --text-muted: #94a3b8;
            --border-color: #475569; --border-light: #334155;
            --primary-500: #60a5fa; --primary-600: #3b82f6;
        }

        /* Reset and base styles */
        *, ::before, ::after { box-sizing: border-box; }
        html { font-size: 16px; line-height: 1.6; -webkit-text-size-adjust: 100%; }
        body { 
            margin: 0; font-family: var(--font-family); background: var(--bg-main); 
            color: var(--text-main); overflow-x: hidden; transition: var(--transition-base);
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
        }

        /* Enhanced mobile-first layout */
        .app-container {
            display: flex; flex-direction: column; min-height: 100vh;
            position: relative; overflow: hidden;
        }

        /* Top Navigation Bar */
        .top-nav {
            height: var(--header-height); background: var(--gradient-primary);
            color: white; display: flex; align-items: center; justify-content: space-between;
            padding: 0 var(--space-4); box-shadow: var(--shadow-md); z-index: 50;
            position: sticky; top: 0;
        }

        .nav-left { display: flex; align-items: center; gap: var(--space-3); }
        .nav-right { display: flex; align-items: center; gap: var(--space-2); }

        .menu-toggle {
            background: none; border: none; color: white; font-size: 1.2rem;
            width: var(--touch-target); height: var(--touch-target);
            display: flex; align-items: center; justify-content: center;
            border-radius: 0.5rem; cursor: pointer; transition: var(--transition-fast);
        }
        .menu-toggle:hover { background: rgba(255,255,255,0.1); }

        .app-title { 
            font-size: var(--font-size-lg); font-weight: 700; 
            display: flex; align-items: center; gap: var(--space-2);
        }
        .app-title i { font-size: 1.1em; }

        /* Quick action buttons in header */
        .quick-actions {
            display: flex; align-items: center; gap: var(--space-2);
        }
        .quick-btn {
            background: rgba(255,255,255,0.15); border: none; color: white;
            width: var(--touch-target); height: var(--touch-target);
            border-radius: 0.5rem; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: var(--transition-fast); font-size: 1.1rem;
        }
        .quick-btn:hover { background: rgba(255,255,255,0.25); transform: scale(1.05); }

        /* Main layout */
        .app-body {
            display: flex; flex: 1; position: relative; overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width); background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color); 
            transform: translateX(-100%); transition: transform var(--transition-base);
            position: fixed; left: 0; top: var(--header-height); bottom: 0;
            z-index: 40; overflow-y: auto; box-shadow: var(--shadow-lg);
        }
        .sidebar.open { transform: translateX(0); }

        .sidebar-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5);
            opacity: 0; pointer-events: none; transition: opacity var(--transition-base);
            z-index: 30; top: var(--header-height);
        }
        .sidebar-overlay.show { opacity: 1; pointer-events: all; }

        /* Sidebar content */
        .sidebar-section {
            padding: var(--space-4); border-bottom: 1px solid var(--border-light);
        }
        .sidebar-section:last-child { border-bottom: none; }

        .sidebar-title {
            font-size: var(--font-size-sm); font-weight: 600; color: var(--text-heading);
            margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2);
        }

        /* Main content area */
        .main-content {
            flex: 1; padding: var(--space-4); overflow-y: auto;
            transition: margin-left var(--transition-base);
        }

        /* Enhanced panels with mobile optimization */
        .panel {
            background: var(--bg-panel); border-radius: 1rem; 
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-color);
            transition: var(--transition-base); margin-bottom: var(--space-4);
            overflow: hidden; position: relative;
        }
        .panel:hover { box-shadow: var(--shadow-md); }
        .panel.focused { 
            border-color: var(--primary-500); 
            box-shadow: var(--shadow-md), var(--ring-primary);
        }

        .panel-header {
            padding: var(--space-4); border-bottom: 1px solid var(--border-light);
            display: flex; align-items: center; justify-content: space-between;
            background: var(--bg-panel-hover);
        }

        .panel-title {
            display: flex; align-items: center; gap: var(--space-3);
            font-size: var(--font-size-lg); font-weight: 600; color: var(--text-heading);
        }
        .panel-title i { color: var(--primary-500); }

        .panel-actions {
            display: flex; gap: var(--space-2);
        }

        .panel-content {
            padding: var(--space-4);
        }

        /* Collapsible panels */
        .panel.collapsed .panel-content { display: none; }
        .panel-collapse-btn {
            background: none; border: none; color: var(--text-muted);
            font-size: 1rem; cursor: pointer; padding: var(--space-1);
            border-radius: 0.25rem; transition: var(--transition-fast);
        }
        .panel-collapse-btn:hover { background: var(--border-light); color: var(--text-main); }
        .panel.collapsed .panel-collapse-btn i { transform: rotate(-90deg); }

        /* Enhanced form elements */
        .form-group {
            margin-bottom: var(--space-4);
        }

        .form-label {
            display: flex; align-items: center; gap: var(--space-2);
            font-size: var(--font-size-sm); font-weight: 500; 
            color: var(--text-heading); margin-bottom: var(--space-2);
        }

        .form-input, .form-textarea, .form-select {
            width: 100%; padding: 0.75rem; border-radius: 0.75rem;
            border: 2px solid var(--border-color); background: var(--bg-input);
            color: var(--text-main); font-family: inherit; font-size: var(--font-size-base);
            transition: var(--transition-fast); min-height: var(--touch-target);
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none; border-color: var(--primary-500);
            background: var(--bg-input-focus); box-shadow: var(--ring-primary);
        }

        .form-textarea {
            resize: vertical; min-height: 120px; font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
        }

        /* Enhanced buttons with touch optimization */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: var(--space-2);
            padding: 0.75rem 1.5rem; min-height: var(--touch-target); border-radius: 0.75rem;
            font-size: var(--font-size-sm); font-weight: 500; text-decoration: none;
            border: 2px solid transparent; cursor: pointer; transition: var(--transition-fast);
            user-select: none; position: relative; overflow: hidden;
        }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-primary {
            background: var(--gradient-primary); color: white;
            box-shadow: var(--shadow-sm);
        }
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-1px); box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: white; color: var(--primary-600); border-color: var(--primary-500);
        }
        .btn-secondary:hover:not(:disabled) {
            background: var(--primary-50); transform: translateY(-1px);
        }

        .btn-danger {
            background: var(--danger-500); color: white;
        }
        .btn-danger:hover:not(:disabled) {
            background: var(--danger-600); transform: translateY(-1px);
        }

        .btn-icon {
            padding: 0.75rem; width: var(--touch-target); height: var(--touch-target);
        }

        .btn-group {
            display: flex; gap: var(--space-2); flex-wrap: wrap;
        }
        .btn-group.vertical { flex-direction: column; }

        /* Floating Action Button */
        .fab {
            position: fixed; bottom: var(--space-6); right: var(--space-4);
            width: var(--fab-size); height: var(--fab-size); border-radius: 50%;
            background: var(--gradient-primary); color: white; border: none;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; cursor: pointer; z-index: 30;
            box-shadow: var(--shadow-lg); transition: var(--transition-base);
        }
        .fab:hover { transform: scale(1.1); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); }

        /* Enhanced drag and drop */
        .drop-zone {
            border: 2px dashed var(--border-color); border-radius: 1rem;
            padding: var(--space-8); text-align: center; transition: var(--transition-base);
            background: var(--border-light); position: relative; overflow: hidden;
        }
        .drop-zone.active {
            border-color: var(--primary-500); background: var(--primary-50);
            transform: scale(1.02);
        }
        .drop-zone-content {
            display: flex; flex-direction: column; align-items: center; gap: var(--space-3);
            color: var(--text-muted);
        }
        .drop-zone.active .drop-zone-content { color: var(--primary-600); }

        /* Toast notifications */
        .toast-container {
            position: fixed; top: calc(var(--header-height) + var(--space-4)); right: var(--space-4);
            z-index: 60; display: flex; flex-direction: column; gap: var(--space-2);
            max-width: 400px; width: 100%;
        }

        .toast {
            background: white; border-radius: 0.75rem; padding: var(--space-4);
            box-shadow: var(--shadow-lg); border-left: 4px solid var(--primary-500);
            display: flex; align-items: flex-start; gap: var(--space-3);
            transform: translateX(100%); opacity: 0;
            transition: var(--transition-base);
        }
        .toast.show { transform: translateX(0); opacity: 1; }
        .toast.success { border-left-color: var(--success-500); }
        .toast.error { border-left-color: var(--danger-500); }
        .toast.warning { border-left-color: var(--warning-500); }

        /* Progress indicators */
        .progress {
            width: 100%; height: 0.5rem; background: var(--border-light);
            border-radius: 0.25rem; overflow: hidden;
        }
        .progress-bar {
            height: 100%; background: var(--gradient-primary);
            transition: width var(--transition-base);
            border-radius: 0.25rem;
        }

        /* Loading states */
        .loading {
            position: relative; overflow: hidden;
        }
        .loading::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: translateX(-100%); animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            100% { transform: translateX(100%); }
        }

        /* Stats and counters */
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: var(--space-3);
        }
        .stat-card {
            background: var(--bg-panel); border-radius: 0.75rem; padding: var(--space-3);
            text-align: center; border: 1px solid var(--border-color);
        }
        .stat-value {
            font-size: var(--font-size-xl); font-weight: 700; color: var(--primary-600);
        }
        .stat-label {
            font-size: var(--font-size-xs); color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.05em;
        }

        /* Search and filter */
        .search-container {
            position: relative;
        }
        .search-input {
            padding-left: 3rem;
        }
        .search-icon {
            position: absolute; left: 1rem; top: 50%; transform: translateY(-50%);
            color: var(--text-muted); font-size: 1rem;
        }

        /* Keyboard shortcuts help */
        .shortcuts-help {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            display: flex; align-items: center; justify-content: center;
            z-index: 100; opacity: 0; pointer-events: none;
            transition: opacity var(--transition-base);
        }
        .shortcuts-help.show { opacity: 1; pointer-events: all; }
        .shortcuts-panel {
            background: var(--bg-panel); border-radius: 1rem; padding: var(--space-6);
            max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;
        }

        /* Responsive design */
        @media (min-width: 768px) {
            .sidebar {
                position: static; transform: none; flex-shrink: 0;
                border-right: 1px solid var(--border-color);
                box-shadow: none;
            }
            .sidebar-overlay { display: none; }
            .menu-toggle { display: none; }
            .main-content { padding: var(--space-6); }
        }

        @media (min-width: 1024px) {
            .app-body { gap: var(--space-6); }
            .main-content { padding: var(--space-8); }
            .stats-grid { grid-template-columns: repeat(4, 1fr); }
        }

        /* iPad specific optimizations */
        @media (min-width: 768px) and (max-width: 1024px) {
            .sidebar { width: 280px; }
            .panel { margin-bottom: var(--space-6); }
            .btn { padding: 0.875rem 1.75rem; }
        }

        /* Dark theme specific adjustments */
        [data-theme="dark"] .toast {
            background: var(--bg-panel); color: var(--text-main);
        }
        [data-theme="dark"] .drop-zone.active {
            background: rgba(59, 130, 246, 0.1);
        }

        /* Accessibility enhancements */
        @media (prefers-reduced-motion: reduce) {
            *, ::before, ::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Focus management */
        .focus-trap:focus-within {
            outline: 2px solid var(--primary-500);
            outline-offset: 2px;
        }

        /* Utility classes */
        .hidden { display: none !important; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .font-mono { font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace; }
        .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-left">
                <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="app-title">
                    <i class="fas fa-microchip"></i>
                    <span>Zenith Pro</span>
                </div>
            </div>
            <div class="nav-right">
                <div class="quick-actions">
                    <button class="quick-btn" id="undoBtn" title="Undo (Ctrl+Z)" aria-label="Undo">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button class="quick-btn" id="redoBtn" title="Redo (Ctrl+Y)" aria-label="Redo">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="quick-btn" id="searchBtn" title="Search (Ctrl+F)" aria-label="Search">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="quick-btn" id="themeToggle" title="Toggle theme" aria-label="Toggle dark mode">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun hidden"></i>
                    </button>
                    <button class="quick-btn" id="helpBtn" title="Keyboard shortcuts (?)" aria-label="Help">
                        <i class="fas fa-question"></i>
                    </button>
                </div>
            </div>
        </nav>

        <div class="app-body">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <!-- Project Management -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-project-diagram"></i>
                        Project
                    </h3>
                    <div class="form-group">
                        <label class="form-label" for="projectName">
                            <i class="fas fa-tag"></i>
                            Project Name
                        </label>
                        <input type="text" id="projectName" class="form-input" 
                               placeholder="My Novel Project" autocomplete="off">
                    </div>
                    <div class="btn-group vertical">
                        <button class="btn btn-primary" id="saveProjectBtn">
                            <i class="fas fa-save"></i>
                            Save Project
                        </button>
                        <button class="btn btn-secondary" id="loadProjectBtn">
                            <i class="fas fa-folder-open"></i>
                            Load Project
                        </button>
                        <button class="btn btn-secondary" id="exportProjectBtn">
                            <i class="fas fa-download"></i>
                            Export Data
                        </button>
                    </div>
                </div>

                <!-- Import Options -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-file-import"></i>
                        Import
                    </h3>
                    <div class="drop-zone" id="fileDropZone">
                        <div class="drop-zone-content">
                            <i class="fas fa-cloud-upload-alt fa-2x"></i>
                            <p>Drop files here or click to select</p>
                            <p class="text-muted">JSON, TXT, CSV supported</p>
                        </div>
                        <input type="file" id="fileInput" class="sr-only" 
                               accept=".json,.txt,.csv" multiple>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-chart-bar"></i>
                        Statistics
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalTerms">0</div>
                            <div class="stat-label">Terms</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalChapters">0</div>
                            <div class="stat-label">Chapters</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="duplicatesFound">0</div>
                            <div class="stat-label">Duplicates</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="lastProcessed">Never</div>
                            <div class="stat-label">Last Run</div>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-cog"></i>
                        Settings
                    </h3>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="autoSave" checked>
                            Auto-save changes
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="showProgress" checked>
                            Show progress indicators
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="fontSize">Font Size</label>
                        <select id="fontSize" class="form-select">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                </div>
            </aside>

            <!-- Sidebar overlay for mobile -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Chapter Input Panel -->
                <div class="panel" id="chapterPanel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="fas fa-book-open"></i>
                            Chapter Content
                        </h2>
                        <div class="panel-actions">
                            <button class="btn btn-secondary btn-icon" id="addChapterBtn" 
                                    title="Add chapter" aria-label="Add new chapter">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="panel-collapse-btn" title="Collapse panel">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="chaptersContainer">
                            <!-- Chapter inputs will be dynamically added here -->
                            <div class="drop-zone" id="chapterDropZone">
                                <div class="drop-zone-content">
                                    <i class="fas fa-book fa-2x"></i>
                                    <p>Add your first chapter</p>
                                    <button class="btn btn-primary" id="addFirstChapter">
                                        <i class="fas fa-plus"></i>
                                        Add Chapter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Terms Management Panel -->
                <div class="panel" id="termsPanel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="fas fa-list-ul"></i>
                            Terms Management
                        </h2>
                        <div class="panel-actions">
                            <div class="search-container">
                                <input type="text" id="termSearch" class="form-input search-input" 
                                       placeholder="Search terms...">
                                <i class="fas fa-search search-icon"></i>
                            </div>
                            <button class="panel-collapse-btn" title="Collapse panel">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="btn-group" style="margin-bottom: var(--space-4);">
                            <button class="btn btn-secondary" id="cleanTermsBtn">
                                <i class="fas fa-broom"></i>
                                Clean & Sort
                            </button>
                            <button class="btn btn-secondary" id="bulkEditBtn">
                                <i class="fas fa-edit"></i>
                                Bulk Edit
                            </button>
                            <button class="btn btn-danger" id="clearTermsBtn">
                                <i class="fas fa-trash"></i>
                                Clear All
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="termsList">
                                <i class="fas fa-tags"></i>
                                Deduplication Terms List
                                <span class="stat-value" style="margin-left: auto; font-size: var(--font-size-sm);" 
                                      id="termsCount">0 terms</span>
                            </label>
                            <textarea id="termsList" class="form-textarea font-mono" 
                                      rows="12" placeholder="Your terms will appear here..."></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="includeHeader">
                                Include custom header in output
                            </label>
                            <textarea id="customHeader" class="form-textarea" 
                                      rows="3" placeholder="Enter custom header text..." 
                                      style="display: none;"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Processing Results Panel -->
                <div class="panel" id="resultsPanel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="fas fa-cogs"></i>
                            Processing Results
                        </h2>
                        <div class="panel-actions">
                            <button class="btn btn-secondary" id="copyResultsBtn" 
                                    title="Copy results" aria-label="Copy results">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="panel-collapse-btn" title="Collapse panel">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="processingProgress" class="hidden" style="margin-bottom: var(--space-4);">
                            <div class="progress">
                                <div class="progress-bar" id="progressBar"></div>
                            </div>
                            <p id="progressText" class="text-center" style="margin-top: var(--space-2);">
                                Processing...
                            </p>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="resultsOutput">
                                <i class="fas fa-list-check"></i>
                                Extracted Terms
                                <span class="stat-value" style="margin-left: auto; font-size: var(--font-size-sm);" 
                                      id="extractedCount">0 new terms</span>
                            </label>
                            <textarea id="resultsOutput" class="form-textarea font-mono" 
                                      rows="10" readonly placeholder="Results will appear here..."></textarea>
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-primary" id="mergeTermsBtn">
                                <i class="fas fa-merge"></i>
                                Merge to List
                            </button>
                            <button class="btn btn-secondary" id="previewBtn">
                                <i class="fas fa-eye"></i>
                                Preview Changes
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" id="processBtn" title="Process chapters (Ctrl+Enter)">
            <i class="fas fa-play"></i>
        </button>

        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Keyboard Shortcuts Help -->
        <div class="shortcuts-help" id="shortcutsHelp">
            <div class="shortcuts-panel">
                <h3 style="margin-bottom: var(--space-4);">Keyboard Shortcuts</h3>
                <div class="shortcuts-list">
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: var(--space-2); font-size: var(--font-size-sm);">
                        <kbd>Ctrl + Enter</kbd><span>Process chapters</span>
                        <kbd>Ctrl + S</kbd><span>Save project</span>
                        <kbd>Ctrl + Z</kbd><span>Undo</span>
                        <kbd>Ctrl + Y</kbd><span>Redo</span>
                        <kbd>Ctrl + F</kbd><span>Search terms</span>
                        <kbd>Ctrl + /</kbd><span>Toggle sidebar</span>
                        <kbd>?</kbd><span>Show this help</span>
                        <kbd>Escape</kbd><span>Close dialogs</span>
                    </div>
                </div>
                <button class="btn btn-primary" style="margin-top: var(--space-4);" 
                        onclick="document.getElementById('shortcutsHelp').classList.remove('show')">
                    Got it!
                </button>
            </div>
        </div>
    </div>

    <script>
        // Enhanced JavaScript with all QoL features
        class ZenithTermProcessor {
            constructor() {
                this.chapters = [];
                this.terms = new Set();
                this.history = { undo: [], redo: [] };
                this.settings = {
                    autoSave: true,
                    showProgress: true,
                    fontSize: 'medium',
                    theme: 'light'
                };
                this.init();
            }

            init() {
                this.loadSettings();
                this.setupEventListeners();
                this.setupKeyboardShortcuts();
                this.setupDragAndDrop();
                this.restoreSession();
                this.updateStats();
            }

            loadSettings() {
                const saved = localStorage.getItem('zenith-settings');
                if (saved) {
                    this.settings = { ...this.settings, ...JSON.parse(saved) };
                }
                this.applySettings();
            }

            saveSettings() {
                localStorage.setItem('zenith-settings', JSON.stringify(this.settings));
            }

            applySettings() {
                document.documentElement.setAttribute('data-theme', this.settings.theme);
                document.body.className = `font-${this.settings.fontSize}`;
                
                // Update UI controls
                document.getElementById('autoSave').checked = this.settings.autoSave;
                document.getElementById('showProgress').checked = this.settings.showProgress;
                document.getElementById('fontSize').value = this.settings.fontSize;
            }

            setupEventListeners() {
                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', () => {
                    this.settings.theme = this.settings.theme === 'light' ? 'dark' : 'light';
                    this.applySettings();
                    this.saveSettings();
                    this.updateThemeToggle();
                });

                // Sidebar toggle
                document.getElementById('menuToggle').addEventListener('click', () => {
                    this.toggleSidebar();
                });

                document.getElementById('sidebarOverlay').addEventListener('click', () => {
                    this.closeSidebar();
                });

                // Panel collapse
                document.querySelectorAll('.panel-collapse-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const panel = e.target.closest('.panel');
                        panel.classList.toggle('collapsed');
                    });
                });

                // Add chapter
                document.getElementById('addChapterBtn').addEventListener('click', () => {
                    this.addChapter();
                });

                document.getElementById('addFirstChapter').addEventListener('click', () => {
                    this.addChapter();
                });

                // Process button
                document.getElementById('processBtn').addEventListener('click', () => {
                    this.processChapters();
                });

                // Terms management
                document.getElementById('cleanTermsBtn').addEventListener('click', () => {
                    this.cleanTerms();
                });

                document.getElementById('clearTermsBtn').addEventListener('click', () => {
                    this.clearTerms();
                });

                // Search
                document.getElementById('termSearch').addEventListener('input', (e) => {
                    this.searchTerms(e.target.value);
                });

                // Auto-save
                document.getElementById('termsList').addEventListener('input', () => {
                    if (this.settings.autoSave) {
                        this.autoSave();
                    }
                    this.updateStats();
                });

                // Settings changes
                document.getElementById('autoSave').addEventListener('change', (e) => {
                    this.settings.autoSave = e.target.checked;
                    this.saveSettings();
                });

                document.getElementById('showProgress').addEventListener('change', (e) => {
                    this.settings.showProgress = e.target.checked;
                    this.saveSettings();
                });

                document.getElementById('fontSize').addEventListener('change', (e) => {
                    this.settings.fontSize = e.target.value;
                    this.applySettings();
                    this.saveSettings();
                });

                // Header toggle
                document.getElementById('includeHeader').addEventListener('change', (e) => {
                    document.getElementById('customHeader').style.display = 
                        e.target.checked ? 'block' : 'none';
                });

                // Help
                document.getElementById('helpBtn').addEventListener('click', () => {
                    this.showShortcuts();
                });

                // Copy buttons
                document.getElementById('copyResultsBtn').addEventListener('click', () => {
                    this.copyToClipboard(document.getElementById('resultsOutput').value);
                });

                // Merge terms
                document.getElementById('mergeTermsBtn').addEventListener('click', () => {
                    this.mergeTerms();
                });

                // Focus management
                document.querySelectorAll('.form-textarea, .form-input').forEach(input => {
                    input.addEventListener('focus', () => {
                        input.closest('.panel')?.classList.add('focused');
                    });
                    input.addEventListener('blur', () => {
                        input.closest('.panel')?.classList.remove('focused');
                    });
                });
            }

            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key) {
                            case 'Enter':
                                e.preventDefault();
                                this.processChapters();
                                break;
                            case 's':
                                e.preventDefault();
                                this.saveProject();
                                break;
                            case 'z':
                                e.preventDefault();
                                if (e.shiftKey) {
                                    this.redo();
                                } else {
                                    this.undo();
                                }
                                break;
                            case 'y':
                                e.preventDefault();
                                this.redo();
                                break;
                            case 'f':
                                e.preventDefault();
                                document.getElementById('termSearch').focus();
                                break;
                            case '/':
                                e.preventDefault();
                                this.toggleSidebar();
                                break;
                        }
                    } else if (e.key === '?' && !e.target.matches('input, textarea')) {
                        e.preventDefault();
                        this.showShortcuts();
                    } else if (e.key === 'Escape') {
                        this.closeSidebar();
                        document.getElementById('shortcutsHelp').classList.remove('show');
                    }
                });
            }

            setupDragAndDrop() {
                const dropZones = [
                    document.getElementById('fileDropZone'),
                    document.getElementById('chapterDropZone')
                ];

                dropZones.forEach(zone => {
                    if (!zone) return;

                    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                        zone.addEventListener(eventName, this.preventDefaults, false);
                    });

                    ['dragenter', 'dragover'].forEach(eventName => {
                        zone.addEventListener(eventName, () => zone.classList.add('active'), false);
                    });

                    ['dragleave', 'drop'].forEach(eventName => {
                        zone.addEventListener(eventName, () => zone.classList.remove('active'), false);
                    });

                    zone.addEventListener('drop', (e) => this.handleDrop(e), false);
                    zone.addEventListener('click', () => document.getElementById('fileInput').click());
                });

                document.getElementById('fileInput').addEventListener('change', (e) => {
                    this.handleFiles(e.target.files);
                });
            }

            preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            handleDrop(e) {
                const files = e.dataTransfer.files;
                this.handleFiles(files);
            }

            async handleFiles(files) {
                for (const file of files) {
                    try {
                        const text = await this.readFile(file);
                        if (file.name.toLowerCase().includes('chapter')) {
                            this.addChapter(text);
                        } else {
                            this.importTerms(text);
                        }
                        this.showToast(`Imported ${file.name}`, 'success');
                    } catch (error) {
                        this.showToast(`Failed to import ${file.name}`, 'error');
                    }
                }
            }

            readFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = e => resolve(e.target.result);
                    reader.onerror = reject;
                    reader.readAsText(file);
                });
            }

            addChapter(content = '') {
                const container = document.getElementById('chaptersContainer');
                const emptyState = document.getElementById('chapterDropZone');
                
                if (emptyState && container.children.length === 1) {
                    emptyState.style.display = 'none';
                }

                const chapterDiv = document.createElement('div');
                chapterDiv.className = 'form-group';
                chapterDiv.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-2);">
                        <label class="form-label">
                            <i class="fas fa-book"></i>
                            Chapter ${this.chapters.length + 1}
                        </label>
                        <button class="btn btn-danger btn-icon" onclick="this.closest('.form-group').remove(); zenithApp.updateStats();" 
                                title="Remove chapter" aria-label="Remove chapter">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <textarea class="form-textarea" rows="6" placeholder="Paste chapter content here..."></textarea>
                `;

                if (content) {
                    chapterDiv.querySelector('textarea').value = content;
                }

                container.appendChild(chapterDiv);
                this.chapters.push({ content });
                this.updateStats();
                
                // Focus the new textarea
                chapterDiv.querySelector('textarea').focus();
            }

            async processChapters() {
                const chapterTextareas = document.querySelectorAll('#chaptersContainer textarea');
                if (chapterTextareas.length === 0) {
                    this.showToast('Please add at least one chapter', 'warning');
                    return;
                }

                const processBtn = document.getElementById('processBtn');
                const progressContainer = document.getElementById('processingProgress');
                const progressBar = document.getElementById('progressBar');
                const progressText = document.getElementById('progressText');
                
                processBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                
                if (this.settings.showProgress) {
                    progressContainer.classList.remove('hidden');
                }

                try {
                    const chapters = Array.from(chapterTextareas).map(ta => ta.value).filter(Boolean);
                    const results = [];

                    for (let i = 0; i < chapters.length; i++) {
                        const progress = ((i + 1) / chapters.length) * 100;
                        progressBar.style.width = `${progress}%`;
                        progressText.textContent = `Processing chapter ${i + 1} of ${chapters.length}...`;

                        const terms = await this.extractTerms(chapters[i]);
                        results.push(...terms);

                        // Simulate processing time for smooth progress
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }

                    const uniqueResults = [...new Set(results)].sort();
                    document.getElementById('resultsOutput').value = uniqueResults.join('\n');
                    document.getElementById('extractedCount').textContent = `${uniqueResults.length} new terms`;

                    this.showToast(`Extracted ${uniqueResults.length} unique terms`, 'success');
                    this.updateStats();

                } catch (error) {
                    this.showToast('Processing failed', 'error');
                } finally {
                    processBtn.innerHTML = '<i class="fas fa-play"></i>';
                    progressContainer.classList.add('hidden');
                }
            }

            async extractTerms(text) {
                // Simulate term extraction logic
                const words = text.toLowerCase().match(/\b[a-z]{3,}\b/g) || [];
                const uniqueWords = [...new Set(words)];
                
                // Filter out common words (simple example)
                const commonWords = ['the', 'and', 'but', 'for', 'are', 'with', 'his', 'her', 'she', 'him', 'was', 'had', 'you', 'not', 'can', 'all', 'any', 'may', 'day', 'get', 'has', 'man', 'old', 'see', 'two', 'way', 'who', 'boy', 'did', 'its', 'let', 'put', 'say', 'she', 'too', 'use'];
                
                return uniqueWords.filter(word => 
            !commonWords.includes(word) && 
            word.length > 3 && 
            !this.terms.has(word)
        );
            }

            mergeTerms() {
                const currentTerms = document.getElementById('termsList').value;
                const newTerms = document.getElementById('resultsOutput').value;
                
                if (!newTerms.trim()) {
                    this.showToast('No terms to merge', 'warning');
                    return;
                }

                const combined = [...new Set([
                    ...currentTerms.split('\n').filter(Boolean),
                    ...newTerms.split('\n').filter(Boolean)
                ])].sort();

                this.addToHistory('merge', { before: currentTerms, after: combined.join('\n') });
                
                document.getElementById('termsList').value = combined.join('\n');
                document.getElementById('resultsOutput').value = '';
                document.getElementById('extractedCount').textContent = '0 new terms';
                
                this.updateStats();
                this.showToast(`Merged ${combined.length} terms`, 'success');
                
                if (this.settings.autoSave) {
                    this.autoSave();
                }
            }

            cleanTerms() {
                const textarea = document.getElementById('termsList');
                const original = textarea.value;
                const lines = original.split('\n').filter(Boolean);
                const cleaned = [...new Set(lines.map(line => line.trim()))].sort();
                
                this.addToHistory('clean', { before: original, after: cleaned.join('\n') });
                
                textarea.value = cleaned.join('\n');
                this.updateStats();
                this.showToast(`Cleaned list: ${cleaned.length} unique terms`, 'success');
            }

            clearTerms() {
                if (confirm('Are you sure you want to clear all terms? This cannot be undone.')) {
                    const original = document.getElementById('termsList').value;
                    this.addToHistory('clear', { before: original, after: '' });
                    
                    document.getElementById('termsList').value = '';
                    this.updateStats();
                    this.showToast('Terms cleared', 'success');
                }
            }

            searchTerms(query) {
                // Implement search highlighting
                const textarea = document.getElementById('termsList');
                if (!query) {
                    textarea.style.background = '';
                    return;
                }
                
                // Simple implementation - in a real app you'd want proper highlighting
                this.showToast(`Searching for: ${query}`, 'info');
            }

            importTerms(text) {
                try {
                    let terms;
                    if (text.startsWith('{') || text.startsWith('[')) {
                        // JSON format
                        const data = JSON.parse(text);
                        terms = Array.isArray(data) ? data : data.terms || [];
                    } else {
                        // Plain text or CSV
                        terms = text.split(/[,\n]/).map(t => t.trim()).filter(Boolean);
                    }
                    
                    const currentTerms = document.getElementById('termsList').value;
                    const combined = [...new Set([
                        ...currentTerms.split('\n').filter(Boolean),
                        ...terms
                    ])].sort();
                    
                    document.getElementById('termsList').value = combined.join('\n');
                    this.updateStats();
                    
                } catch (error) {
                    this.showToast('Failed to import terms', 'error');
                }
            }

            updateStats() {
                const termsList = document.getElementById('termsList').value;
                const terms = termsList.split('\n').filter(Boolean);
                const chapters = document.querySelectorAll('#chaptersContainer textarea').length;
                
                document.getElementById('totalTerms').textContent = terms.length;
                document.getElementById('totalChapters').textContent = chapters;
                document.getElementById('termsCount').textContent = `${terms.length} terms`;
                
                // Update last processed time
                const lastProcessed = localStorage.getItem('zenith-last-processed');
                if (lastProcessed) {
                    const date = new Date(lastProcessed);
                    document.getElementById('lastProcessed').textContent = date.toLocaleDateString();
                }
            }

            addToHistory(action, data) {
                this.history.undo.push({ action, data, timestamp: Date.now() });
                this.history.redo = []; // Clear redo stack
                
                // Limit history size
                if (this.history.undo.length > 50) {
                    this.history.undo.shift();
                }
            }

            undo() {
                if (this.history.undo.length === 0) {
                    this.showToast('Nothing to undo', 'info');
                    return;
                }
                
                const lastAction = this.history.undo.pop();
                this.history.redo.push(lastAction);
                
                document.getElementById('termsList').value = lastAction.data.before;
                this.updateStats();
                this.showToast(`Undone: ${lastAction.action}`, 'success');
            }

            redo() {
                if (this.history.redo.length === 0) {
                    this.showToast('Nothing to redo', 'info');
                    return;
                }
                
                const action = this.history.redo.pop();
                this.history.undo.push(action);
                
                document.getElementById('termsList').value = action.data.after;
                this.updateStats();
                this.showToast(`Redone: ${action.action}`, 'success');
            }

            autoSave() {
                const data = {
                    terms: document.getElementById('termsList').value,
                    projectName: document.getElementById('projectName').value,
                    includeHeader: document.getElementById('includeHeader').checked,
                    customHeader: document.getElementById('customHeader').value,
                    chapters: Array.from(document.querySelectorAll('#chaptersContainer textarea')).map(ta => ta.value),
                    timestamp: Date.now()
                };
                
                localStorage.setItem('zenith-autosave', JSON.stringify(data));
            }

            restoreSession() {
                const saved = localStorage.getItem('zenith-autosave');
                if (!saved) return;
                
                try {
                    const data = JSON.parse(saved);
                    
                    document.getElementById('termsList').value = data.terms || '';
                    document.getElementById('projectName').value = data.projectName || '';
                    document.getElementById('includeHeader').checked = data.includeHeader || false;
                    document.getElementById('customHeader').value = data.customHeader || '';
                    
                    if (data.includeHeader) {
                        document.getElementById('customHeader').style.display = 'block';
                    }
                    
                    // Restore chapters
                    if (data.chapters && data.chapters.length > 0) {
                        data.chapters.forEach(content => {
                            if (content.trim()) {
                                this.addChapter(content);
                            }
                        });
                    }
                    
                    this.updateStats();
                    
                } catch (error) {
                    console.warn('Failed to restore session:', error);
                }
            }

            saveProject() {
                const projectName = document.getElementById('projectName').value.trim();
                if (!projectName) {
                    this.showToast('Please enter a project name', 'warning');
                    document.getElementById('projectName').focus();
                    return;
                }
                
                const data = {
                    name: projectName,
                    terms: document.getElementById('termsList').value,
                    includeHeader: document.getElementById('includeHeader').checked,
                    customHeader: document.getElementById('customHeader').value,
                    chapters: Array.from(document.querySelectorAll('#chaptersContainer textarea')).map(ta => ta.value),
                    settings: this.settings,
                    created: Date.now(),
                    modified: Date.now()
                };
                
                const projects = JSON.parse(localStorage.getItem('zenith-projects') || '{}');
                projects[projectName] = data;
                localStorage.setItem('zenith-projects', JSON.stringify(projects));
                localStorage.setItem('zenith-last-processed', Date.now());
                
                this.showToast(`Project "${projectName}" saved`, 'success');
                this.updateStats();
            }

            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                
                if (window.innerWidth < 768) {
                    sidebar.classList.toggle('open');
                    overlay.classList.toggle('show');
                }
            }

            closeSidebar() {
                if (window.innerWidth < 768) {
                    document.getElementById('sidebar').classList.remove('open');
                    document.getElementById('sidebarOverlay').classList.remove('show');
                }
            }

            showShortcuts() {
                document.getElementById('shortcutsHelp').classList.add('show');
            }

            updateThemeToggle() {
                const toggle = document.getElementById('themeToggle');
                const moonIcon = toggle.querySelector('.fa-moon');
                const sunIcon = toggle.querySelector('.fa-sun');
                
                if (this.settings.theme === 'dark') {
                    moonIcon.classList.add('hidden');
                    sunIcon.classList.remove('hidden');
                } else {
                    moonIcon.classList.remove('hidden');
                    sunIcon.classList.add('hidden');
                }
            }

            showToast(message, type = 'info', duration = 3000) {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                
                toast.innerHTML = `
                    <i class="fas ${icons[type] || icons.info}"></i>
                    <div>
                        <p style="margin: 0; font-weight: 500;">${message}</p>
                    </div>
                `;
                
                container.appendChild(toast);
                
                // Trigger animation
                requestAnimationFrame(() => {
                    toast.classList.add('show');
                });
                
                // Auto remove
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 250);
                }, duration);
            }

            async copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                    this.showToast('Copied to clipboard', 'success');
                } catch (error) {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    this.showToast('Copied to clipboard', 'success');
                }
            }
        }

        // Initialize the app
        const zenithApp = new ZenithTermProcessor();

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                zenithApp.closeSidebar();
            }
        });

        // Register service worker for PWA capabilities
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript,console.log("SW registered");');
        }
    </script>
</body>
</html>
